<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>CSE 457A Final Project - Group 12</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://d3js.org/d3.v6.js"></script>
</head>

<body>

    <div id="main-vis">
        <nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
            <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="https://pubmed.ncbi.nlm.nih.gov/28968736/"
                target="_blank">NetProphet2.0</a>
            <input class="form-control form-control-dark w-100" type="text"
                placeholder="Search a single gene or enter a comma separated list" aria-label="Search">
            <div id="modal-button-div" class="navbar-brand col-sm-3 col-md-2">
                <button id="modal-button" type="button" class="btn btn-secondary" data-toggle="modal"
                    data-target="#myModal2">
                    Update Inputs
                </button>
            </div>
        </nav>

        <div class="container-fluid">
            <div class="row wrapper">
                <nav class="col-md-2 d-none d-md-block bg-light sidebar">
                    <div class="sidebar-sticky">
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <!-- <a id="homepage-return" class="nav-link active" href="index.html"> -->
                                <a id="homepage-return" class="nav-link active" onclick="redirectAndClearSession('index.html')">

                                    <span data-feather="home"></span>
                                    Organisms <span class="sr-only">(current)</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <button id="instructions-modal-button" type="button" class="btn nav-link text-left" data-toggle="modal" data-target="#myInstructionsModal"><span data-feather="file"></span>Instructions</button>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">
                                    <span data-feather="file"></span>
                                    Export Results
                                </a>
                            </li>

                            <h6
                                class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                                <span>Reference:</span>
                            </h6>
                            <ul class="nav flex-column mb-2">
                                <li class="nav-item">
                                    <a class="nav-link" href="https://pubmed.ncbi.nlm.nih.gov/28968736/"
                                        target="_blank">
                                        <span data-feather="file-text"></span>
                                        NetProphet 2.0: mapping transcription factor networks by exploiting scalable
                                        data resources
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <span class="nav-link">To Cite:</span>
                                    <p class="nav-link">
                                        <cite>
                                            Kang Y, Liow HH, Maier EJ, Brent MR. NetProphet 2.0: mapping transcription
                                            factor networks by exploiting scalable data resources.
                                            Bioinformatics. 2018 Jan 15;34(2):249-257. doi:
                                            10.1093/bioinformatics/btx563. PMID: 28968736; PMCID: PMC5860202.
                                        </cite>
                                    </p>
                                </li>
                                <li class="nav-item">
                                    <span class="nav-link">Contact:</span>
                                    <p class="nav-link">
                                        brent@wustl.edu
                                    </p>
                                </li>
                            </ul>
                    </div>
                </nav>


                <!-- Instructions Modal -->
                <div class="modal fade" id="myInstructionsModal" role="dialog">
                    <div class="modal-dialog">
                    
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Instructions</h4>
                        </div>
                        <div class="modal-body">
                        <p>
                            First choose if you are a Fly biologist or a Yeast biologist. Click your creature.
                        </p>
                        <p>
                            A TF (Transcription Factor) network will appear by default. The blue node is a Transcription Factor (read the tf story!), the red nodes are the genes that this Transcription Factor regulates.
                        </p>
                        <p>
                            Next, please click the button "Update Inputs" on the top right hand portion of the screen. A side panel will appear. At the top of the side panel is a section labeled weights. The values represented in this normalized distribution represent the strength of evidence that the selected Transcription Factor controls a given gene. Therefore, selecting a range within this graph will return all genes regulated by the TF where the strength of evidence is between the given range. 
                        </p>
                        <p>
                            Use the brush to select a portion of the curve on the far righthand side. If the network is large (lots of red nodes), select less of the distrubtion and click "Update Weights". Too many nodes still? Select even less of the curve and update.
                        </p>
                        <p>
                            This function is important because different biologists will have different uses for this data -- if this biologist is doing a large genomics experiment, they may want to allow more edges per TF, so that they get more genes per TF to test, even though those edges are less deterministic. If the biologist is going to explore these genes by hand in some way, they will want a more stringent threshold.
                        </p>
                        <p>
                            Currently, we only support brushing within the range (mean + standard deviation) to (mean + 3 * standard deviation). This is primarily for 2 reasons. Firstly, supporting the entire normalized curve is simply too much data for our application to load. Secondly, biologists will rarely use data with a weight threshold of such a low strength of evidence that it is not contained with this range. Overall, they will primarily be looking at the top percentage of the distribution. 
                        </p>
                        <p>
                            Next, a biologist would want to either enter their favorite transcription factor, or a gene list. Please notice the space in which that entry would happen in the right side panel. If you are a fly biologist, try entering FBgn0016917. It has a lot of targets -- you may want to decrease your threshold! 
                        </p>
                        <p>
                            At this point, imagine you've entered a TF (or maybe you really did). The graphs on your screen have populated for that TF/target network. You should play around with the nodes/edges graph at this point by dragging the nodes, hovering over them, and clicking on them. Eventually, a user will have options of spatial organizations of these nodes.
                        </p>
                        <p>
                            When you click a gene (all nodes are genes, but the blue one is special because it is a regulator of the red genes), information is populated in the "Gene Detail". This is a place holder at this point, though some information will be populated.
                        </p>
                        <p>
                            If there isn't much interesting happening on the Gene Ontology (GO) graph below the node/edge graph, reload and see what a new network looks like. Do this until you get more than a handful of dots. Different network clusters return more significant hits (see below) than others.
                        </p>
                        <p>
                            Ontology, remember, means "hierarchy of knowledge". GO is one of computational biology's methods of beginning to figure out what genes do and how they relate to one another. The graph is created by sending the target gene list to an external database, which returns GO annotation and a significance score, among other things. The x-axis are different categories that the genes fall into -- for example, GO:BP is a "biological process" while GO:MF is a "molecular function". The dots are (size and height) ranked by their significance. Only annotations that have an adjusted p-value greater than .05 are displayed, and the scale is -log10, so the higher the better.
                        </p>
                        <p>
                            This graph does not have its interactivity yet. Please see the process book for a drawing of what it will do.
                        </p>
                        <p>
                            Eventually, there will be functionality to allow the user to group the genes in various different ways (eg, by whether or not there is experimental support for the TF/target edge, or by the gene function).
                        </p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                    
                    </div>
                </div>





                <!-- Main Section -->
                <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-8 m-4 w-50" id="edge-chart-heading">
                                <h2 id="edge-chart-heading-text"></h2>
                            </div>
                            <div class="col-md-8 m-0 w-50" id="network-vis" width="450" height="380"></div>
                            <div id="gene-detail" class="col-md-4 m-0 gene-detail border border-dark">
                                <h2>Gene Detail</h2>
                                <!-- <a id="go-network-chart" href="#" target="_blank">View GO term chart</a> -->
                            </div>
                        </div>
                        <div class="row">
                            <div class="go-network col-md-12">
                                <h1>Go Network</h1>
                            </div>
                        </div>
                    </div>

                </main>

                <!-- Modal -->
                <div class="modal right fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="myModalLabel2">Update Inputs</h4>
                            </div>

                            <div class="modal-body">
                                <label class="sidebar-titles">Weights:</label>
                                <div id="weights">
                                    <div id="weight-svg">

                                    </div>
                                    <div id="weight-input">
                                        <form onsubmit="return false">
                                            <div class="form-group">
                                                <label for="select-weight-thresh">Your Weights:</label>
                                                <div id="weight-labels">
                                                    <label>Minimum:</label><input type="text" id="min-weight"
                                                        class="weight-inputs" name="minimum-weight" value=""
                                                        readonly><br>
                                                    <label>Maximum:</label> <input type="text" id="max-weight"
                                                        class="weight-inputs" name="maximum-weight" value=""
                                                        readonly><br>
                                                </div>
                                            </div>
                                            <button type="submit" class="btn btn-primary mb-2"
                                                id="weights-submitted">Update Weights</button>
                                        </form>
                                    </div>
                                </div>
                                <br>
                                <label class="sidebar-titles">File Upload:</label>

                                <div id="user-input">
                                    <form>
                                        <div class="form-group">
                                            <label for="selectUploadType">Are you uploading a Transcripion Factor or a
                                                Gene List?</label>
                                            <select class="form-control" id="selectUploadType">
                                                <option id="tf-option" value="tf-form">Transcription Factor</option>
                                                <option id="gene-option" value="gene-input-form">Gene List</option>
                                            </select>
                                        </div>
                                        <div id="gene-input-form" class="form-group hide">
                                            <label for="selectGeneFile">Please Upload a Gene List:</label>
                                            <input type="file" class="form-control-file" id="selectGeneFile">
                                        </div>
                                        <div id="tf-form" class="form-group show">
                                            <label for="selectTfFile">Please Enter a Transcription Factor:</label>
                                            <br />
                                            <input type="text" id="selectTfFile">
                                        </div>
                                        <button type="submit" class="btn btn-primary mb-2"
                                            id="selectedSubmit">Update</button>
                                    </form>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- end main-vis -->

    <!-- Bootstrap core JavaScript
  ================================================== -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
    <script>
        feather.replace()
    </script>

    <!-- Graphs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    </script>

    <!-- Icons -->
    <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
    <script>
        feather.replace()
    </script>
    <script type="application/javascript" src="js/edgeWeightDistribution.js"></script>
    <script type="application/javascript" src="js/network.js"></script>
    <script type="application/javascript" src="js/weight_threshold.js"></script>
    <script type="application/javascript" src="js/GeneDetail.js"></script>
    <script type="application/javascript" src="js/GoNetwork.js"></script>
    <script type="application/javascript" src="js/NetworkDetail.js"></script>
    <script type="application/javascript" src="js/redirect.js"></script>
    <script type="application/javascript" src="js/main.js"></script>

</body>

</html>
